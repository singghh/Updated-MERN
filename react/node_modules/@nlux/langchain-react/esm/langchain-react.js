import{createChatAdapter as r}from"@nlux/langchain";export{createChatAdapter}from"@nlux/langchain";import{useDeepCompareEffect as e}from"@nlux/react";import{useState as t}from"react";const o=e=>{const{url:t,dataTransferMode:o,headers:a,inputPreProcessor:n,outputPreProcessor:s,useInputSchema:u}=e||{};if(o&&"stream"!==o&&"fetch"!==o)throw new Error("Data transfer mode not supported");if(!t)throw new Error("Runnable URL is required");let i=r().withUrl(t);return o&&(i=i.withDataTransferMode(o)),a&&(i=i.withHeaders(a)),n&&(i=i.withInputPreProcessor(n)),s&&(i=i.withOutputPreProcessor(s)),void 0!==u&&(i=i.withInputSchema(u)),i},a=r=>{const[a,n]=t(!1),[s,u]=t(o(r)),{url:i,dataTransferMode:c,headers:h,inputPreProcessor:p,outputPreProcessor:d,useInputSchema:f}=r||{};return e((()=>{if(!a)return void n(!0);const e=o(r);u(e)}),[a,i,c,h||{},p,d,f]),s};export{a as useChatAdapter};
